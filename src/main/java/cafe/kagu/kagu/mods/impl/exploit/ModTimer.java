/**
 * 
 */
package cafe.kagu.kagu.mods.impl.exploit;

import java.text.DecimalFormat;

import cafe.kagu.kagu.eventBus.EventHandler;
import cafe.kagu.kagu.eventBus.Handler;
import cafe.kagu.kagu.eventBus.impl.EventTick;
import cafe.kagu.kagu.mods.Module;
import cafe.kagu.kagu.settings.impl.DoubleSetting;
import cafe.kagu.kagu.settings.impl.IntegerSetting;

/**
 * @author lavaflowglow
 *
 */
public class ModTimer extends Module {
	
	public ModTimer() {
		super("Timer", Category.EXPLOIT);
		setSettings(timerSpeed, ticksPerSecond);
	}
	
	private DoubleSetting timerSpeed = new DoubleSetting("Timer Speed", 1, 0.1, 5, 0.1);
	private IntegerSetting ticksPerSecond = new IntegerSetting("Ticks Per Second", 20, 1, 60, 1);
	
	@Override
	public void onDisable() {
		mc.getTimer().setTimerSpeed(1);
		mc.getTimer().setTicksPerSecond(20);
	}
	
	@EventHandler
	private Handler<EventTick> onTick = e -> {
		if (e.isPost())
			return;
		mc.getTimer().setTimerSpeed((float) timerSpeed.getValue());
		mc.getTimer().setTicksPerSecond(ticksPerSecond.getValue());
		setInfo(new DecimalFormat("0.00").format(timerSpeed.getValue() * ticksPerSecond.getValue()) + " TPS");
	};
	
}
